<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deals</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
  </head>
  <body class="flex min-h-screen text-slate-700">
    <aside class="sidebar w-64 text-white p-6 hidden lg:flex flex-col">
      <div class="text-2xl font-bold mb-8">Local CRM</div>
      <nav class="space-y-3 text-sm">
        <a class="block hover:bg-white/10 rounded-lg px-4 py-2" href="dashboard.html">
          <i class="fa-solid fa-chart-column mr-2"></i> Dashboard
        </a>
        <a class="block bg-white/20 rounded-lg px-4 py-2" href="deals.html">
          <i class="fa-solid fa-briefcase mr-2"></i> Deals
        </a>
        <a class="block hover:bg-white/10 rounded-lg px-4 py-2" href="companies.html">
          <i class="fa-solid fa-building mr-2"></i> Companies
        </a>
        <a class="block hover:bg-white/10 rounded-lg px-4 py-2" href="contacts.html">
          <i class="fa-solid fa-address-book mr-2"></i> Contacts
        </a>
        <a class="block hover:bg-white/10 rounded-lg px-4 py-2" href="tasks.html">
          <i class="fa-solid fa-list-check mr-2"></i> Tasks
        </a>
      </nav>
      <button data-logout class="mt-auto bg-white/20 hover:bg-white/30 rounded-lg px-4 py-2 text-sm">
        Logout
      </button>
    </aside>

    <main class="flex-1">
      <header class="flex items-center justify-between px-6 py-5 border-b bg-white">
        <div>
          <h1 class="text-2xl font-semibold text-slate-800">Deals</h1>
          <p class="text-sm text-slate-500">Track deals across your pipeline</p>
        </div>
        <div class="flex items-center gap-3">
          <img data-user-avatar class="w-10 h-10 rounded-full" alt="avatar" />
          <div>
            <div data-user-name class="font-semibold text-sm text-slate-700"></div>
            <div class="text-xs text-slate-400">Sales</div>
          </div>
        </div>
      </header>

      <section class="p-6 space-y-4">
        <div class="flex flex-wrap gap-3 items-center justify-between">
          <div class="flex gap-2">
            <button id="table-view" class="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm">Table View</button>
            <button id="pipeline-view" class="bg-white border px-4 py-2 rounded-lg text-sm">Pipeline View</button>
          </div>
          <div class="flex gap-3">
            <input id="deal-search" class="border rounded-lg px-3 py-2 text-sm" placeholder="Search deals" />
            <select id="stage-filter" class="border rounded-lg px-3 py-2 text-sm">
              <option value="">All Stages</option>
              <option value="Lead">Lead</option>
              <option value="Qualified">Qualified</option>
              <option value="Proposal">Proposal</option>
              <option value="Negotiation">Negotiation</option>
              <option value="Won">Won</option>
              <option value="Lost">Lost</option>
            </select>
            <select id="sort-by" class="border rounded-lg px-3 py-2 text-sm">
              <option value="name">Sort: Deal</option>
              <option value="company">Sort: Company</option>
              <option value="stage">Sort: Stage</option>
              <option value="amount">Sort: Amount</option>
              <option value="probability">Sort: Probability</option>
              <option value="owner">Sort: Owner</option>
              <option value="closeDate">Sort: Close Date</option>
            </select>
          </div>
        </div>

        <div class="grid gap-4 lg:grid-cols-3">
          <div class="card p-5 space-y-4">
            <div class="flex items-center justify-between">
              <div>
                <h2 class="text-lg font-semibold text-slate-800">Pipeline snapshot</h2>
                <p class="text-xs text-slate-500">AI-weighted forecast and pipeline health</p>
              </div>
              <span class="badge bg-indigo-50 text-indigo-600">Live</span>
            </div>
            <div class="grid grid-cols-2 gap-4 text-sm">
              <div>
                <p class="text-xs uppercase text-slate-400">Total value</p>
                <p id="metric-total" class="text-lg font-semibold text-slate-800">$0</p>
              </div>
              <div>
                <p class="text-xs uppercase text-slate-400">Weighted forecast</p>
                <p id="metric-forecast" class="text-lg font-semibold text-slate-800">$0</p>
              </div>
              <div>
                <p class="text-xs uppercase text-slate-400">Win rate</p>
                <p id="metric-winrate" class="text-lg font-semibold text-slate-800">0%</p>
              </div>
              <div>
                <p class="text-xs uppercase text-slate-400">Deals closing soon</p>
                <p id="metric-soon" class="text-lg font-semibold text-slate-800">0</p>
              </div>
            </div>
            <div>
              <p class="text-xs uppercase text-slate-400 mb-2">Stage distribution</p>
              <div id="stage-bars" class="space-y-2"></div>
            </div>
          </div>

          <div class="card p-5 space-y-4">
            <div class="flex items-center justify-between">
              <div>
                <h2 class="text-lg font-semibold text-slate-800">AI assistant queue</h2>
                <p class="text-xs text-slate-500">Suggested actions to keep deals moving</p>
              </div>
              <button class="text-xs text-indigo-600 font-semibold">Generate tasks</button>
            </div>
            <div id="ai-recommendations" class="space-y-3 text-sm"></div>
            <div class="rounded-lg border border-dashed border-slate-200 bg-slate-50 p-3 text-xs text-slate-500">
              Tip: Use AI to auto-create follow-up sequences, update probability, and highlight risks.
            </div>
          </div>

          <div class="card p-5 space-y-4">
            <div class="flex items-center justify-between">
              <div>
                <h2 class="text-lg font-semibold text-slate-800">Automations & sequences</h2>
                <p class="text-xs text-slate-500">Launch multi-step outreach like Monday.com</p>
              </div>
              <span class="badge bg-emerald-50 text-emerald-600">3 active</span>
            </div>
            <div class="space-y-3 text-sm">
              <div class="flex items-start gap-3 rounded-lg border border-slate-200 p-3">
                <div class="mt-1 h-2 w-2 rounded-full bg-indigo-500"></div>
                <div>
                  <p class="font-semibold text-slate-700">Lead sequence</p>
                  <p class="text-xs text-slate-500">Email + call reminders over 7 days</p>
                </div>
              </div>
              <div class="flex items-start gap-3 rounded-lg border border-slate-200 p-3">
                <div class="mt-1 h-2 w-2 rounded-full bg-emerald-500"></div>
                <div>
                  <p class="font-semibold text-slate-700">Auto-assign owners</p>
                  <p class="text-xs text-slate-500">Rotate leads to available reps</p>
                </div>
              </div>
              <div class="flex items-start gap-3 rounded-lg border border-slate-200 p-3">
                <div class="mt-1 h-2 w-2 rounded-full bg-amber-500"></div>
                <div>
                  <p class="font-semibold text-slate-700">Deal health alerts</p>
                  <p class="text-xs text-slate-500">Notify when probability drops below 40%</p>
                </div>
              </div>
            </div>
            <button class="w-full border border-indigo-200 text-indigo-600 rounded-lg py-2 text-sm font-semibold">
              Add automation
            </button>
          </div>
        </div>

        <div id="table-container" class="card overflow-x-auto">
          <table class="min-w-full text-sm">
            <thead class="bg-slate-50 text-left">
              <tr>
                <th class="px-4 py-3 cursor-pointer" data-sort="name">Deal</th>
                <th class="px-4 py-3 cursor-pointer" data-sort="company">Company</th>
                <th class="px-4 py-3 cursor-pointer" data-sort="stage">Stage</th>
                <th class="px-4 py-3 cursor-pointer" data-sort="amount">Amount</th>
                <th class="px-4 py-3 cursor-pointer" data-sort="probability">Probability</th>
                <th class="px-4 py-3 cursor-pointer" data-sort="owner">Owner</th>
                <th class="px-4 py-3 cursor-pointer" data-sort="closeDate">Close Date</th>
              </tr>
            </thead>
            <tbody id="deals-table"></tbody>
          </table>
        </div>
        <div id="deals-pagination" class="flex flex-wrap items-center justify-between text-sm"></div>

        <div id="pipeline-container" class="hidden">
          <div id="pipeline-board" class="flex gap-4 overflow-x-auto"></div>
        </div>
      </section>
    </main>

    <script type="module" src="js/deals.js"></script>
  </body>
</html>
